{
  "version": 3,
  "sources": ["../../bpmn-js/lib/util/DiUtil.js", "../../bpmn-js/lib/features/modeling/util/ModelingUtil.js"],
  "sourcesContent": ["import {\n  is,\n  getBusinessObject,\n  getDi\n} from './ModelUtil';\n\nimport {\n  some\n} from 'min-dash';\n\n/**\n * @typedef {import('../model/Types').Element} Element\n * @typedef {import('../model/Types').ModdleElement} ModdleElement\n */\n\n/**\n * @param {Element} element\n * @param {ModdleElement} [di]\n *\n * @return {boolean}\n */\nexport function isExpanded(element, di) {\n\n  if (is(element, 'bpmn:CallActivity')) {\n    return false;\n  }\n\n  if (is(element, 'bpmn:SubProcess')) {\n    di = di || getDi(element);\n\n    if (di && is(di, 'bpmndi:BPMNPlane')) {\n      return true;\n    }\n\n    return di && !!di.isExpanded;\n  }\n\n  if (is(element, 'bpmn:Participant')) {\n    return !!getBusinessObject(element).processRef;\n  }\n\n  return true;\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nexport function isHorizontal(element) {\n\n  if (!is(element, 'bpmn:Participant') && !is(element, 'bpmn:Lane')) {\n    return undefined;\n  }\n\n  var isHorizontal = getDi(element).isHorizontal;\n\n  if (isHorizontal === undefined) {\n    return true;\n  }\n\n  return isHorizontal;\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nexport function isInterrupting(element) {\n  return element && getBusinessObject(element).isInterrupting !== false;\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nexport function isEventSubProcess(element) {\n  return element && !!getBusinessObject(element).triggeredByEvent;\n}\n\n/**\n * @param {Element} element\n * @param {string} eventType\n *\n * @return {boolean}\n */\nexport function hasEventDefinition(element, eventType) {\n  var eventDefinitions = getBusinessObject(element).eventDefinitions;\n\n  return some(eventDefinitions, function(event) {\n    return is(event, eventType);\n  });\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nexport function hasErrorEventDefinition(element) {\n  return hasEventDefinition(element, 'bpmn:ErrorEventDefinition');\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nexport function hasEscalationEventDefinition(element) {\n  return hasEventDefinition(element, 'bpmn:EscalationEventDefinition');\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nexport function hasCompensateEventDefinition(element) {\n  return hasEventDefinition(element, 'bpmn:CompensateEventDefinition');\n}\n", "import { isString } from 'min-dash';\n\nexport { is, isAny } from '../../../util/ModelUtil';\n\nimport {\n  is,\n  isAny,\n  getBusinessObject\n} from '../../../util/ModelUtil';\n\nimport { isHorizontal } from '../../../util/DiUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\n * @typedef {import('../../../model/Types').Element} Element\n */\n\n/**\n * Return the parent of the element with any of the given types.\n *\n * @param {Element} element\n * @param {string|string[]} anyType\n *\n * @return {Element|null}\n */\nexport function getParent(element, anyType) {\n\n  if (isString(anyType)) {\n    anyType = [ anyType ];\n  }\n\n  while ((element = element.parent)) {\n    if (isAny(element, anyType)) {\n      return element;\n    }\n  }\n\n  return null;\n}\n\n/**\n * Determines if the local modeling direction is vertical or horizontal.\n *\n * @param {Element} element\n * @param {ElementRegistry} [elementRegistry] - provide to consider parent diagram direction\n *\n * @return {boolean} false for vertical pools, lanes and their children. true otherwise\n */\nexport function isDirectionHorizontal(element, elementRegistry) {\n\n  var parent = getParent(element, 'bpmn:Process');\n  if (parent) {\n    return true;\n  }\n\n  var types = [ 'bpmn:Participant', 'bpmn:Lane' ];\n\n  parent = getParent(element, types);\n  if (parent) {\n    return isHorizontal(parent);\n  } else if (isAny(element, types)) {\n    return isHorizontal(element);\n  }\n\n  var process;\n  for (process = getBusinessObject(element); process; process = process.$parent) {\n    if (is(process, 'bpmn:Process')) {\n      break;\n    }\n  }\n\n  if (!elementRegistry) {\n    return true;\n  }\n\n  // The direction may be specified in another diagram. We ignore that there\n  // could be multiple diagrams with contradicting properties based on the\n  // assumption that such BPMN files are unusual.\n  var pool = elementRegistry.find(function(shape) {\n    var businessObject = getBusinessObject(shape);\n    return businessObject && businessObject.get('processRef') === process;\n  });\n\n  if (!pool) {\n    return true;\n  }\n\n  return isHorizontal(pool);\n}"],
  "mappings": ";;;;;;;;;;;;AAqBO,SAAS,WAAW,SAAS,IAAI;AAEtC,MAAI,GAAG,SAAS,mBAAmB,GAAG;AACpC,WAAO;AAAA,EACT;AAEA,MAAI,GAAG,SAAS,iBAAiB,GAAG;AAClC,SAAK,MAAM,MAAM,OAAO;AAExB,QAAI,MAAM,GAAG,IAAI,kBAAkB,GAAG;AACpC,aAAO;AAAA,IACT;AAEA,WAAO,MAAM,CAAC,CAAC,GAAG;AAAA,EACpB;AAEA,MAAI,GAAG,SAAS,kBAAkB,GAAG;AACnC,WAAO,CAAC,CAAC,kBAAkB,OAAO,EAAE;AAAA,EACtC;AAEA,SAAO;AACT;AAOO,SAAS,aAAa,SAAS;AAEpC,MAAI,CAAC,GAAG,SAAS,kBAAkB,KAAK,CAAC,GAAG,SAAS,WAAW,GAAG;AACjE,WAAO;AAAA,EACT;AAEA,MAAIA,gBAAe,MAAM,OAAO,EAAE;AAElC,MAAIA,kBAAiB,QAAW;AAC9B,WAAO;AAAA,EACT;AAEA,SAAOA;AACT;AAOO,SAAS,eAAe,SAAS;AACtC,SAAO,WAAW,kBAAkB,OAAO,EAAE,mBAAmB;AAClE;AAOO,SAAS,kBAAkB,SAAS;AACzC,SAAO,WAAW,CAAC,CAAC,kBAAkB,OAAO,EAAE;AACjD;AAQO,SAAS,mBAAmB,SAAS,WAAW;AACrD,MAAI,mBAAmB,kBAAkB,OAAO,EAAE;AAElD,SAAO,KAAK,kBAAkB,SAAS,OAAO;AAC5C,WAAO,GAAG,OAAO,SAAS;AAAA,EAC5B,CAAC;AACH;AAOO,SAAS,wBAAwB,SAAS;AAC/C,SAAO,mBAAmB,SAAS,2BAA2B;AAChE;AAOO,SAAS,6BAA6B,SAAS;AACpD,SAAO,mBAAmB,SAAS,gCAAgC;AACrE;AAOO,SAAS,6BAA6B,SAAS;AACpD,SAAO,mBAAmB,SAAS,gCAAgC;AACrE;;;AChGO,SAAS,UAAU,SAAS,SAAS;AAE1C,MAAI,SAAS,OAAO,GAAG;AACrB,cAAU,CAAE,OAAQ;AAAA,EACtB;AAEA,SAAQ,UAAU,QAAQ,QAAS;AACjC,QAAI,MAAM,SAAS,OAAO,GAAG;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AAEA,SAAO;AACT;AAUO,SAAS,sBAAsB,SAAS,iBAAiB;AAE9D,MAAI,SAAS,UAAU,SAAS,cAAc;AAC9C,MAAI,QAAQ;AACV,WAAO;AAAA,EACT;AAEA,MAAI,QAAQ,CAAE,oBAAoB,WAAY;AAE9C,WAAS,UAAU,SAAS,KAAK;AACjC,MAAI,QAAQ;AACV,WAAO,aAAa,MAAM;AAAA,EAC5B,WAAW,MAAM,SAAS,KAAK,GAAG;AAChC,WAAO,aAAa,OAAO;AAAA,EAC7B;AAEA,MAAI;AACJ,OAAK,UAAU,kBAAkB,OAAO,GAAG,SAAS,UAAU,QAAQ,SAAS;AAC7E,QAAI,GAAG,SAAS,cAAc,GAAG;AAC/B;AAAA,IACF;AAAA,EACF;AAEA,MAAI,CAAC,iBAAiB;AACpB,WAAO;AAAA,EACT;AAKA,MAAI,OAAO,gBAAgB,KAAK,SAAS,OAAO;AAC9C,QAAI,iBAAiB,kBAAkB,KAAK;AAC5C,WAAO,kBAAkB,eAAe,IAAI,YAAY,MAAM;AAAA,EAChE,CAAC;AAED,MAAI,CAAC,MAAM;AACT,WAAO;AAAA,EACT;AAEA,SAAO,aAAa,IAAI;AAC1B;",
  "names": ["isHorizontal"]
}
